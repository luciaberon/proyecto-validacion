(this["webpackJsonpproyecto-validacion"]=this["webpackJsonpproyecto-validacion"]||[]).push([[0],{337:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var c,r=n(0),a=n.n(r),o=n(51),i=n.n(o),s=n(58),l=n(9),j=n(31),u=n(19),d=n(25),b=n(11),m=n.n(b),h=n(18),x=n(56),O=n(73),p=n.n(O),f={"Access-Control-Allow-Origin":"*"},g=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(f),e.next=4,p.a.post("https://validacion-test.herokuapp.com/api/auth/login",t);case 4:(n=e.sent).data.token&&(localStorage.setItem("user",n.data.token),localStorage.setItem("username",t.username));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={register:function(e){console.log("Data",e),p.a.post("https://validacion-test.herokuapp.com/api/auth/register/",e)},login:g,logout:function(){localStorage.removeItem("user")}},w=Object(x.b)("auth/login",function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.login(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(x.b)("auth/logout",Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.logout();case 1:case"end":return e.stop()}}),e)})))),S=Object(x.b)("auth/register",function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.register(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(x.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{checkLogged:function(e){localStorage.getItem("user")?e.isLoggedIn=!0:e.isLoggedIn=!1}},extraReducers:(c={},Object(d.a)(c,w.fulfilled,(function(e){e.isLoggedIn=!0})),Object(d.a)(c,y.fulfilled,(function(e){e.isLoggedIn=!1})),Object(d.a)(c,S.fulfilled,(function(e){e.isLoggedIn=!1})),c)}),k=C.reducer,I=C.actions.checkLogged,z=n(41),q=n(4),B={global:function(e){return{body:{bg:Object(q.h)("#f0e7db","#202023")(e)}}}},A=Object(j.b)({config:{initialColorMode:"dark",useSystemColorMode:!0},styles:B,components:{Heading:{variants:{"section-title":{textDecoration:"underline",fontSize:20,textUnderlineOffset:6,textDecorationColor:"#525252",textDecorationThickness:4,marginTop:3,marginBottom:4}}},Link:{baseStyle:function(e){return{textDecoration:"none"}}}},colors:{glassTeal:"#88ccca"},fonts:{heading:"'Roboto'"}}),L=n(20),E=n(5),D=function(){return Object(E.jsx)(L.a,{styles:"\n    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap');\n    "})},N=n(13),P=n(17),T=n(57),R=(n(316),n(151)),M=n(84),F=n(63),U=n(65),W=n(35);function H(){var e=T.b().shape({name:T.c().min(3,"Nombre muy corto").max(16,"Nombre muy largo").required("Nombre requerido"),surname:T.c().min(3,"Apellido muy corto").max(16,"Apellido muy largo").required("Apellido requerido"),email:T.c().email("Formato de email inv\xe1lido").required("Email requerido"),password:T.c().min(8,"Contrase\xf1a muy corta").required("Contrase\xf1a requerida"),username:T.a().min(8,"N\xfamero muy corto").required("N\xfamero de documento requerido")}),t=Object(z.b)(),n=a.a.useState(!1),c=Object(N.a)(n,2),r=c[0],o=c[1],i=function(){return o(!r)};return Object(E.jsxs)(u.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(E.jsx)(R.a,{bg:"teal.500",size:"xl"}),Object(E.jsx)(u.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(E.jsx)(u.i,{as:"h3",size:"md",children:"Introduzca sus datos para realizar el registro"}),Object(E.jsx)(P.b,{initialValues:{name:"",surname:"",email:"",username:"",password:""},validationSchema:e,onSubmit:function(){var e=Object(h.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(S(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){e.values,e.touched,e.isSubmiting,e.handleChange,e.handleBlur;return Object(E.jsxs)(P.a,{children:[Object(E.jsx)(U.a,{id:"name",name:"name",mt:6,variant:"flushed",type:"text",focusBorderColor:"teal.500",w:"350px",colorScheme:"teal",inputProps:{placeholder:"Nombre"}}),Object(E.jsx)(U.a,{id:"surname",name:"surname",mt:6,variant:"flushed",type:"text",placeholder:"Apellidos",colorScheme:"teal",w:"350px",focusBorderColor:"teal.500",inputProps:{placeholder:"Apellido"}}),Object(E.jsx)(U.a,{id:"username",name:"username",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"N\xfamero de documento",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"N\xfamero de documento"}}),Object(E.jsxs)(M.b,{children:[Object(E.jsx)(U.a,{id:"email",name:"email",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"Email",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"Correo electr\xf3nico"}}),Object(E.jsx)(M.c,{mt:6,pointerEvents:"none",children:Object(E.jsx)(W.a,{color:"teal"})})]}),Object(E.jsxs)(M.b,{children:[Object(E.jsx)(U.a,{name:"password",id:"password",mt:6,focusBorderColor:"teal.500",variant:"flushed",w:"350px",inputProps:{placeholder:"Contrase\xf1a",type:r?"text":"password"}}),Object(E.jsx)(M.d,{mt:6,width:"4.5rem",children:Object(E.jsx)(F.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:i,children:r?Object(E.jsx)(W.f,{}):Object(E.jsx)(W.e,{})})})]}),Object(E.jsxs)(F.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})}})]})}var V=n(152),J=n(72),G=function(){var e=Object(J.b)().toggleColorMode;return Object(E.jsx)(F.b,{ml:6,"aria-label":"Toggle theme toggle button",colorScheme:Object(J.c)("purple","orange"),icon:Object(J.c)(Object(E.jsx)(W.c,{}),Object(E.jsx)(W.d,{})),onClick:e})},Q=n(170);function _(){var e=Object(V.a)(),t=Object(N.a)(e,1)[0],n=Object(l.g)();return Object(E.jsxs)(u.c,{direction:t?"row":"column",mb:20,maxW:"70vw",justify:"space-between",children:[Object(E.jsx)(u.f,{onClick:function(){return n("/",{replace:!0})},children:Object(E.jsx)(F.b,{colorScheme:"teal",icon:Object(E.jsx)(Q.a,{})})}),Object(E.jsxs)(u.a,{display:"flex",direction:t?"row":"column",mt:t?"0":"5",children:[Object(E.jsx)(u.f,{onClick:function(){return n("/iniciarsesion",{replace:!0})},children:Object(E.jsx)(F.a,{mr:6,colorScheme:"teal",children:"Inicia Sesi\xf3n"})}),Object(E.jsx)(u.f,{onClick:function(){return n("/",{replace:!0})},children:Object(E.jsx)(F.a,{colorScheme:"teal",children:"Registrate"})}),Object(E.jsx)(G,{})]})]})}var K=n(117),X=n(166);function Y(){var e=Object(z.b)(),t=Object(l.g)(),n=Object(X.a)(),c=n.register,r=n.handleSubmit,o=n.formState.errors;console.log(o);var i=a.a.useState(!1),j=Object(N.a)(i,2),d=j[0],b=j[1];return Object(E.jsxs)(u.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(E.jsx)(R.a,{bg:"teal.500",size:"xl"}),Object(E.jsx)(u.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(E.jsxs)(u.i,{as:"h3",size:"md",children:["Inicie sesi\xf3n o"," ",Object(E.jsx)(s.b,{to:"/",passHref:!0,children:"reg\xedstrese"})]}),Object(E.jsxs)("form",{onSubmit:r((function(n){e(w(n));var c=localStorage.getItem("username");t("admin"==c?"/paneladministracion":"/validacion")})),children:[Object(E.jsxs)(M.b,{children:[Object(E.jsx)(M.a,Object(K.a)({mt:10,minW:"40ch",variant:"flushed",type:"text",placeholder:"Documento de identidad",colorScheme:"teal",focusBorderColor:"teal.500"},c("username",{required:!0}))),Object(E.jsx)(M.d,{mt:10,pointerEvents:"none",children:Object(E.jsx)(W.b,{color:"teal"}),mr:4})]}),Object(E.jsxs)(M.b,{children:[Object(E.jsx)(M.a,Object(K.a)({mt:6,focusBorderColor:"teal.500",variant:"flushed",type:d?"text":"password",placeholder:"password"},c("password",{required:!0}))),Object(E.jsx)(M.d,{mt:6,width:"4.5rem",children:Object(E.jsx)(F.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:function(){return b(!d)},children:d?Object(E.jsx)(W.f,{}):Object(E.jsx)(W.e,{})})})]}),Object(E.jsxs)(F.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})]})}function Z(){return Object(E.jsxs)(u.c,{w:"60vw",display:"flex",direction:"column",align:"center",justify:"center",children:[Object(E.jsx)(u.e,{as:"h1",size:"xl",children:"404"}),Object(E.jsx)(u.e,{as:"h2",size:"md",align:"center",children:"Lo sentimos, no hemos podido encontrar la pagina que estabas buscando."}),Object(E.jsx)(u.f,{href:"/",children:Object(E.jsx)(F.a,{mt:6,colorScheme:"teal",children:"Volver"})})]})}var $=n(167),ee=n.n($),te="Fulano",ne=localStorage.getItem("username"),ce="https://luciaberon.github.io/proyecto-validacion/#/validarusuario?".concat(ne);function re(){return Object(E.jsxs)(u.c,{direction:"column",align:"center",children:[Object(E.jsxs)(u.e,{size:"md",children:["Gracias por registrarse ",te]}),Object(E.jsx)(u.i,{children:"Para continuar con el proceso, necesitamos que valide su identidad."}),Object(E.jsx)(u.i,{mt:6,children:"Escanee el siguiente c\xf3digo QR con su telefono para continuar:"}),Object(E.jsx)(u.a,{mt:6,children:Object(E.jsx)(ee.a,{value:ce})})]})}var ae=n(157),oe=n(87),ie=p.a.create({baseURL:"https://validacion-test.herokuapp.com/api/",headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}});function se(){var e=Object(r.useState)(),t=Object(N.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){ie.get("/panel/users");c(n)}),[]);var a=function(e){!function(e){ie.post("/panel/validate",e)}(e)},o=n.filter((function(e){return!1===e.validate})),i=n.filter((function(e){return!0===e.validate}));return console.log(o),Object(E.jsxs)(u.c,{direction:"column",align:"center",children:[Object(E.jsxs)(u.e,{children:["Bienvenido ","Admin"]}),Object(E.jsxs)(u.i,{children:["Tenemos ",o.length," usuarios por validar"]}),Object(E.jsxs)(u.a,{direction:"column",align:"center",mt:20,children:[!o.length&&Object(E.jsx)(u.b,{children:Object(E.jsx)(u.i,{children:"\xa1Enhorabuena! No quedan usuarios por validar."})}),o.map((function(e){return Object(E.jsxs)(u.a,{children:[Object(E.jsxs)(u.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(E.jsx)(ae.a,{allowToggle:!0,minW:"50rem",children:Object(E.jsxs)(ae.d,{borderColor:"teal",focusColor:"teal",children:[Object(E.jsx)("h2",{children:Object(E.jsxs)(ae.b,{focusColor:"teal",children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)(u.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(E.jsx)(ae.c,{})]})}),Object(E.jsxs)(ae.e,{justify:"center",pb:4,children:[Object(E.jsxs)(u.a,{display:"flex",children:[" ",Object(E.jsx)(oe.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(E.jsx)(oe.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(E.jsx)(F.a,{onClick:function(){return a(e.username)},colorScheme:"teal",m:4,children:"Validar documentos"})]})]})})]})}))," "]}),Object(E.jsxs)(u.a,{direction:"column",align:"center",mt:20,children:[Object(E.jsxs)(u.e,{size:"md",children:["Tenemos ",i.length," usuarios validados hasta ahora"]}),!o.length&&Object(E.jsx)(u.b,{children:Object(E.jsx)(u.i,{children:"\xa1Parece que no hay usuarios validados!"})}),i.map((function(e){return Object(E.jsxs)(u.a,{children:[Object(E.jsxs)(u.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(E.jsx)(ae.a,{allowToggle:!0,minW:"50rem",children:Object(E.jsxs)(ae.d,{borderColor:"teal",focusColor:"teal",children:[Object(E.jsx)("h2",{children:Object(E.jsxs)(ae.b,{focusColor:"teal",children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)(u.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(E.jsx)(ae.c,{})]})}),Object(E.jsxs)(ae.e,{justify:"center",pb:4,children:[Object(E.jsxs)(u.a,{display:"flex",children:[" ",Object(E.jsx)(oe.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(E.jsx)(oe.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(E.jsx)(F.a,{colorScheme:"teal",m:4,children:"Anular validaci\xf3n"})]})]})})]})}))," "]})]})}var le=n(118),je=(n(335),n(168)),ue=n.n(je),de=n(169),be=n.n(de);n(336);function me(){Object(l.g)(),Object(l.h)().id_user;var e=Object(r.useState)(null),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),o=Object(N.a)(a,2),i=(o[0],o[1],new URLSearchParams(window.location.search).get("username"));return Object(E.jsxs)(u.c,{direction:"column",align:"center",justify:"center",children:[Object(E.jsx)(u.e,{mb:6,children:'Bienvenido "NOMBRE"'}),Object(E.jsx)(u.i,{align:"center",children:"Para finalizar tu registro, necesitamos que subas tu documento de identidad. Ten en cuenta lo siguiente, por favor:"}),Object(E.jsxs)(u.j,{centerContent:!0,mt:4,mb:10,children:[Object(E.jsx)(u.g,{children:"Solo aceptamos imagenes en formato jpeg o png"}),Object(E.jsx)(u.g,{children:"Deben ser dos fotografias (anverso y reverso)"}),Object(E.jsx)(u.g,{children:"Tu cuenta no estar\xe1 activada hasta que el administrador no valide tus documentos"})]}),Object(E.jsx)("form",{children:Object(E.jsx)(le.FilePond,{files:n,onupdatefiles:c,allowMultiple:!0,maxFiles:2,server:{process:{url:"https://validacion-test.herokuapp.com/api/onboarding/dni",ondata:function(e){return e.append("username",i),e}}},name:"files",labelIdle:'Drag and Drop your files or <span class="filepond--label-action">Browse</span>'})})]})}function he(e){var t=e.children,n=e.auth,c="admin"==localStorage.getItem("username")?"/paneladministracion":"/validacion";return n?t:Object(E.jsx)(l.a,{to:c})}Object(le.registerPlugin)(ue.a,be.a);var xe=function(){var e=Object(z.b)(),t=Object(z.c)((function(e){return e.auth.isLoggedIn}));return console.log("AUTH",t),Object(r.useEffect)((function(){e(I())}),[]),Object(E.jsx)(j.a,{theme:A,children:Object(E.jsxs)(u.b,{p:10,mt:5,className:"App",children:[Object(E.jsx)(D,{}),Object(E.jsxs)(s.a,{children:[Object(E.jsx)(_,{}),Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{path:"/",element:Object(E.jsx)(H,{}),auth:t}),Object(E.jsx)(l.b,{path:"/iniciarsesion",element:Object(E.jsx)(Y,{}),auth:t}),Object(E.jsx)(l.b,{path:"/validacion",element:Object(E.jsx)(he,{auth:t,children:Object(E.jsx)(re,{})})}),Object(E.jsx)(l.b,{path:"/paneladministracion",element:Object(E.jsx)(he,{auth:t,children:Object(E.jsx)(se,{})})}),Object(E.jsx)(l.b,{path:"/validarusuario",element:Object(E.jsx)(me,{}),auth:t}),Object(E.jsx)(l.b,{path:"*",element:Object(E.jsx)(Z,{})})]})]})]})})},Oe=(n(337),n(36)),pe=Object(Oe.b)({auth:k}),fe=Object(x.a)({reducer:pe});i.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(z.a,{store:fe,children:Object(E.jsx)(xe,{})})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.f4572c55.chunk.js.map
(this["webpackJsonpproyecto-validacion"]=this["webpackJsonpproyecto-validacion"]||[]).push([[0],{324:function(e,t,c){},325:function(e,t,c){"use strict";c.r(t);var a,n=c(0),r=c.n(n),s=c(52),o=c.n(s),i=c(49),l=c(118),j=c(73),d=c(10),u=c(31),m=c(19),b=c(25),h=c(11),x=c.n(h),p=c(18),O=c(57),g=c(74),f=c.n(g),v={"Access-Control-Allow-Origin":"*"},y=function(){var e=Object(p.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(v),e.next=4,f.a.post("https://validacion-test.herokuapp.com/api/auth/login",t);case 4:(c=e.sent).data.token&&(localStorage.setItem("user",c.data.token),localStorage.setItem("username",c.data.token));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={register:function(e){console.log("Data",e),f.a.post("https://validacion-test.herokuapp.com/api/auth/register/",e)},login:y,logout:function(){localStorage.removeItem("user")}},S=Object(O.b)("auth/login",function(){var e=Object(p.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.login(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(O.b)("auth/logout",Object(p.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.logout();case 1:case"end":return e.stop()}}),e)})))),k=Object(O.b)("auth/register",function(){var e=Object(p.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("REGISTRO",t),w.register(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(O.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{checkLogged:function(e){localStorage.getItem("user")?e.isLoggedIn=!0:e.isLoggedIn=!1}},extraReducers:(a={},Object(b.a)(a,S.fulfilled,(function(e){e.isLoggedIn=!0})),Object(b.a)(a,C.fulfilled,(function(e){e.isLoggedIn=!1})),Object(b.a)(a,k.fulfilled,(function(e){e.isLoggedIn=!1})),a)}),I=z.reducer,q=z.actions.checkLogged,_=c(41),B=c(4),P={global:function(e){return{body:{bg:Object(B.h)("#f0e7db","#202023")(e)}}}},A=Object(u.b)({config:{initialColorMode:"dark",useSystemColorMode:!0},styles:P,components:{Heading:{variants:{"section-title":{textDecoration:"underline",fontSize:20,textUnderlineOffset:6,textDecorationColor:"#525252",textDecorationThickness:4,marginTop:3,marginBottom:4}}},Link:{baseStyle:function(e){return{textDecoration:"none"}}}},colors:{glassTeal:"#88ccca"},fonts:{heading:"'Roboto'"}}),L=c(20),D=c(5),E=function(){return Object(D.jsx)(L.a,{styles:"\n    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap');\n    "})},T=c(13),N=c(17),R=c(58),F=c(149),M=c(85),G=c(63),W=c(65),V=c(35);function H(){var e=R.b().shape({name:R.c().min(3,"Nombre muy corto").max(16,"Nombre muy largo").required("Nombre requerido"),surname:R.c().min(3,"Apellido muy corto").max(16,"Apellido muy largo").required("Apellido requerido"),email:R.c().email("Formato de email inv\xe1lido").required("Email requerido"),password:R.c().min(8,"Contrase\xf1a muy corta").required("Contrase\xf1a requerida"),username:R.a().min(8,"N\xfamero muy corto").required("N\xfamero de documento requerido")}),t=Object(_.b)(),c=r.a.useState(!1),a=Object(T.a)(c,2),n=a[0],s=a[1],o=function(){return s(!n)};return Object(D.jsxs)(m.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(D.jsx)(F.a,{bg:"teal.500",size:"xl"}),Object(D.jsx)(m.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(D.jsx)(m.i,{as:"h3",size:"md",children:"Introduzca sus datos para realizar el registro"}),Object(D.jsx)(N.b,{initialValues:{name:"",surname:"",email:"",username:"",password:""},validationSchema:e,onSubmit:function(){var e=Object(p.a)(x.a.mark((function e(c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(k(c));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){e.values,e.touched,e.isSubmiting,e.handleChange,e.handleBlur;return Object(D.jsxs)(N.a,{children:[Object(D.jsx)(W.a,{id:"name",name:"name",mt:6,variant:"flushed",type:"text",focusBorderColor:"teal.500",w:"350px",colorScheme:"teal",inputProps:{placeholder:"Nombre"}}),Object(D.jsx)(W.a,{id:"surname",name:"surname",mt:6,variant:"flushed",type:"text",placeholder:"Apellidos",colorScheme:"teal",w:"350px",focusBorderColor:"teal.500",inputProps:{placeholder:"Apellido"}}),Object(D.jsx)(W.a,{id:"username",name:"username",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"N\xfamero de documento",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"N\xfamero de documento"}}),Object(D.jsxs)(M.b,{children:[Object(D.jsx)(W.a,{id:"email",name:"email",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"Email",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"Correo electr\xf3nico"}}),Object(D.jsx)(M.c,{mt:6,pointerEvents:"none",children:Object(D.jsx)(V.a,{color:"teal"})})]}),Object(D.jsxs)(M.b,{children:[Object(D.jsx)(W.a,{name:"password",id:"password",mt:6,focusBorderColor:"teal.500",variant:"flushed",w:"350px",inputProps:{placeholder:"Contrase\xf1a",type:n?"text":"password"}}),Object(D.jsx)(M.d,{mt:6,width:"4.5rem",children:Object(D.jsx)(G.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:o,children:n?Object(D.jsx)(V.f,{}):Object(D.jsx)(V.e,{})})})]}),Object(D.jsxs)(G.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})}})]})}var J=c(150),U=c(72),Q=function(){var e=Object(U.b)().toggleColorMode;return Object(D.jsx)(G.b,{ml:6,"aria-label":"Toggle theme toggle button",colorScheme:Object(U.c)("purple","orange"),icon:Object(U.c)(Object(D.jsx)(V.c,{}),Object(D.jsx)(V.d,{})),onClick:e})},K=c(168);function X(){var e=Object(J.a)(),t=Object(T.a)(e,1)[0];return Object(D.jsxs)(m.c,{direction:t?"row":"column",mb:20,maxW:"70vw",justify:"space-between",children:[Object(D.jsx)(m.f,{href:"/",children:Object(D.jsx)(G.b,{colorScheme:"teal",icon:Object(D.jsx)(K.a,{})})}),Object(D.jsxs)(m.a,{display:"flex",direction:t?"row":"column",mt:t?"0":"5",children:[Object(D.jsx)(m.f,{href:"/iniciarsesion",children:Object(D.jsx)(G.a,{mr:6,colorScheme:"teal",children:"Inicia Sesi\xf3n"})}),Object(D.jsx)(m.f,{href:"/",children:Object(D.jsx)(G.a,{colorScheme:"teal",children:"Registrate"})}),Object(D.jsx)(Q,{})]})]})}var Y=c(164);function Z(){var e=Object(_.b)(),t=Object(Y.a)(),c=t.register,a=t.handleSubmit,n=t.formState.errors;console.log(n);var s=r.a.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return Object(D.jsxs)(m.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(D.jsx)(F.a,{bg:"teal.500",size:"xl"}),Object(D.jsx)(m.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(D.jsxs)(m.i,{as:"h3",size:"md",children:["Inicie sesi\xf3n o"," ",Object(D.jsx)(j.b,{to:"/",passHref:!0,children:"reg\xedstrese"})]}),Object(D.jsxs)("form",{onSubmit:a((function(t){e(S(t))})),children:[Object(D.jsxs)(M.b,{children:[Object(D.jsx)(M.a,Object(i.a)({mt:10,minW:"40ch",variant:"flushed",type:"text",placeholder:"Documento de identidad",colorScheme:"teal",focusBorderColor:"teal.500"},c("username",{required:!0}))),Object(D.jsx)(M.d,{mt:10,pointerEvents:"none",children:Object(D.jsx)(V.b,{color:"teal"}),mr:4})]}),Object(D.jsxs)(M.b,{children:[Object(D.jsx)(M.a,Object(i.a)({mt:6,focusBorderColor:"teal.500",variant:"flushed",type:l?"text":"password",placeholder:"password"},c("password",{required:!0}))),Object(D.jsx)(M.d,{mt:6,width:"4.5rem",children:Object(D.jsx)(G.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:function(){return d(!l)},children:l?Object(D.jsx)(V.f,{}):Object(D.jsx)(V.e,{})})})]}),Object(D.jsxs)(G.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})]})}function $(){return Object(D.jsxs)(m.c,{w:"60vw",display:"flex",direction:"column",align:"center",justify:"center",children:[Object(D.jsx)(m.e,{as:"h1",size:"xl",children:"404"}),Object(D.jsx)(m.e,{as:"h2",size:"md",align:"center",children:"Lo sentimos, no hemos podido encontrar la pagina que estabas buscando."}),Object(D.jsx)(m.f,{href:"/",children:Object(D.jsx)(G.a,{mt:6,colorScheme:"teal",children:"Volver"})})]})}var ee=c(165),te=c.n(ee),ce="Fulano";function ae(){return Object(D.jsxs)(m.c,{direction:"column",align:"center",children:[Object(D.jsxs)(m.e,{size:"md",children:["Gracias por registrarse ",ce]}),Object(D.jsx)(m.i,{children:"Para continuar con el proceso, necesitamos que valide su identidad."}),Object(D.jsx)(m.i,{mt:6,children:"Escanee el siguiente c\xf3digo QR con su telefono para continuar:"}),Object(D.jsx)(m.a,{mt:6,children:Object(D.jsx)(te.a,{value:"/validacion"})})]})}var ne=c(155),re=c(88);f.a.create({baseURL:"validacion-desarrollo.herokuapp.com/api",headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}});function se(){var e=[{id:1,username:"54537689P",name:"Fulano",lastname:"Smith",img1:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",img2:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",validate:!1},{id:2,username:"54677689P",name:"Menganito",lastname:"Fernandez",img1:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",img2:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",validate:!0},{id:3,username:"54347689P",name:"Manolito",lastname:"Garcia",img1:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",img2:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",validate:!1},{id:4,username:"55647689P",name:"Pepe",lastname:"Gotera",img1:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",img2:"https://s1.eestatic.com/2021/11/24/curiosidades/mascotas/629697961_216041764_1706x960.jpg",validate:!0}],t=e.filter((function(e){return!1===e.validate})),c=e.filter((function(e){return!0===e.validate}));return console.log(t),Object(D.jsxs)(m.c,{direction:"column",align:"center",children:[Object(D.jsxs)(m.e,{children:["Bienvenido ","Admin"]}),Object(D.jsxs)(m.i,{children:["Tenemos ",t.length," usuarios por validar"]}),Object(D.jsxs)(m.a,{direction:"column",align:"center",mt:20,children:[!t.length&&Object(D.jsx)(m.b,{children:Object(D.jsx)(m.i,{children:"\xa1Enhorabuena! No quedan usuarios por validar."})}),t.map((function(e){return Object(D.jsxs)(m.a,{children:[Object(D.jsxs)(m.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(D.jsx)(ne.a,{allowToggle:!0,minW:"50rem",children:Object(D.jsxs)(ne.d,{borderColor:"teal",focusColor:"teal",children:[Object(D.jsx)("h2",{children:Object(D.jsxs)(ne.b,{focusColor:"teal",children:[Object(D.jsx)(m.a,{flex:"1",textAlign:"left",children:Object(D.jsx)(m.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(D.jsx)(ne.c,{})]})}),Object(D.jsxs)(ne.e,{justify:"center",pb:4,children:[Object(D.jsxs)(m.a,{display:"flex",children:[" ",Object(D.jsx)(re.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(D.jsx)(re.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(D.jsx)(G.a,{colorScheme:"teal",m:4,children:"Validar documentos"})]})]})})]})}))," "]}),Object(D.jsxs)(m.a,{direction:"column",align:"center",mt:20,children:[Object(D.jsxs)(m.e,{size:"md",children:["Tenemos ",c.length," usuarios validados hasta ahora"]}),!t.length&&Object(D.jsx)(m.b,{children:Object(D.jsx)(m.i,{children:"\xa1Parece que no hay usuarios validados!"})}),c.map((function(e){return Object(D.jsxs)(m.a,{children:[Object(D.jsxs)(m.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(D.jsx)(ne.a,{allowToggle:!0,minW:"50rem",children:Object(D.jsxs)(ne.d,{borderColor:"teal",focusColor:"teal",children:[Object(D.jsx)("h2",{children:Object(D.jsxs)(ne.b,{focusColor:"teal",children:[Object(D.jsx)(m.a,{flex:"1",textAlign:"left",children:Object(D.jsx)(m.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(D.jsx)(ne.c,{})]})}),Object(D.jsxs)(ne.e,{justify:"center",pb:4,children:[Object(D.jsxs)(m.a,{display:"flex",children:[" ",Object(D.jsx)(re.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(D.jsx)(re.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(D.jsx)(G.a,{colorScheme:"teal",m:4,children:"Anular validaci\xf3n"})]})]})})]})}))," "]})]})}var oe=c(117),ie=(c(322),c(166)),le=c.n(ie),je=c(167),de=c.n(je);c(323);function ue(){Object(d.g)(),Object(d.h)().id_user;var e=Object(n.useState)(null),t=Object(T.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),s=Object(T.a)(r,2);s[0],s[1];return Object(D.jsxs)(m.c,{direction:"column",align:"center",justify:"center",children:[Object(D.jsxs)(m.e,{mb:6,children:["Bienvenido ","Fulano"]}),Object(D.jsx)(m.i,{align:"center",children:"Para finalizar tu registro, necesitamos que subas tu documento de identidad. Ten en cuenta lo siguiente, por favor:"}),Object(D.jsxs)(m.j,{centerContent:!0,mt:4,mb:10,children:[Object(D.jsx)(m.g,{children:"Solo aceptamos imagenes en formato jpeg o png"}),Object(D.jsx)(m.g,{children:"Deben ser dos fotografias (anverso y reverso)"}),Object(D.jsx)(m.g,{children:"Tu cuenta no estar\xe1 activada hasta que el administrador no valide tus documentos"})]}),Object(D.jsx)("form",{children:Object(D.jsx)(oe.FilePond,{files:c,onupdatefiles:a,allowMultiple:!0,maxFiles:2,server:{process:{url:"validacion-desarrollo.herokuapp.com/api/onboarding/dni",ondata:function(e){return e.append("username",localStorage.getItem("username")),e}}},name:"files",labelIdle:'Drag and Drop your files or <span class="filepond--label-action">Browse</span>'})})]})}Object(oe.registerPlugin)(le.a,de.a);var me=["auth","element"];var be=function(e){var t=e.auth,c=e.element,a=Object(l.a)(e,me);return Object(D.jsx)(d.b,Object(i.a)(Object(i.a)({},a),{},{render:function(){return t?Object(D.jsx)(d.a,{replace:!0,to:"/pagina"}):Object(D.jsx)(c,{})}}))},he=function(){var e=Object(_.b)();return Object(_.c)((function(e){return e.auth.isLoggedIn})),Object(n.useEffect)((function(){e(q())}),[]),Object(D.jsx)(u.a,{theme:A,children:Object(D.jsxs)(m.b,{p:10,mt:5,className:"App",children:[Object(D.jsx)(E,{}),Object(D.jsx)(X,{}),Object(D.jsx)(j.a,{children:Object(D.jsxs)(d.d,{children:[Object(D.jsx)(be,{path:"/",element:Object(D.jsx)(H,{})}),Object(D.jsx)(be,{path:"/iniciarsesion",element:Object(D.jsx)(Z,{})}),Object(D.jsx)(be,{path:"/validacion",element:Object(D.jsx)(ae,{})}),Object(D.jsx)(be,{path:"/paneladministracion",element:Object(D.jsx)(se,{})}),Object(D.jsx)(be,{path:"/validacion:id_user",element:Object(D.jsx)(ue,{})}),Object(D.jsx)(d.b,{path:"*",element:Object(D.jsx)($,{})})]})})]})})},xe=(c(324),c(36)),pe=Object(xe.b)({auth:I}),Oe=Object(O.a)({reducer:pe});o.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(_.a,{store:Oe,children:Object(D.jsx)(he,{})})}),document.getElementById("root"))}},[[325,1,2]]]);
//# sourceMappingURL=main.e8359893.chunk.js.map
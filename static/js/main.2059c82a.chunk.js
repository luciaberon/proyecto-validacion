(this["webpackJsonpproyecto-validacion"]=this["webpackJsonpproyecto-validacion"]||[]).push([[0],{352:function(e,t,n){},353:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),o=n(43),s=n.n(o),i=n(56),l=n(124),j=n(59),u=n(14),d=n(32),b=n(19),m=n(27),h=n(10),O=n.n(h),p=n(18),x=n(63),g=n(47),f=n.n(g),v={"Access-Control-Allow-Origin":"*"},S=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(v),e.next=4,f.a.post("https://validacion-desarrollo.herokuapp.com/api/auth/login/",t);case 4:(n=e.sent).data.token&&(localStorage.setItem("user",n.data.token),localStorage.setItem("username",t.username));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){localStorage.removeItem("name"),localStorage.removeItem("user"),localStorage.removeItem("username")},y={register:function(e){console.log("Data",e),f.a.post("https://validacion-desarrollo.herokuapp.com/api/auth/register/",e)},login:S,logout:w},C=Object(x.b)("auth/login",function(){var e=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("dataaaaaa",t),e.next=3,y.login(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(x.b)("auth/logout",Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.logout();case 1:case"end":return e.stop()}}),e)})))),k=Object(x.b)("auth/register",function(){var e=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.register(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(x.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{checkLogged:function(e){localStorage.getItem("user")?e.isLoggedIn=!0:e.isLoggedIn=!1}},extraReducers:(c={},Object(m.a)(c,C.fulfilled,(function(e){e.isLoggedIn=!0})),Object(m.a)(c,I.fulfilled,(function(e){e.isLoggedIn=!1})),Object(m.a)(c,k.fulfilled,(function(e){e.isLoggedIn=!1})),c)}),A=z.reducer,E=z.actions.checkLogged,q=n(38),B=n(4),D={global:function(e){return{body:{bg:Object(B.h)("#f0e7db","#202023")(e)}}}},L=Object(d.b)({config:{initialColorMode:"dark",useSystemColorMode:!0},styles:D,components:{Heading:{variants:{"section-title":{textDecoration:"underline",fontSize:20,textUnderlineOffset:6,textDecorationColor:"#525252",textDecorationThickness:4,marginTop:3,marginBottom:4}}},Link:{baseStyle:function(e){return{textDecoration:"none"}}}},colors:{glassTeal:"#88ccca"},fonts:{heading:"'Roboto'"}}),N=n(20),T=n(5),P=function(){return Object(T.jsx)(N.a,{styles:"\n    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap');\n    "})},R=n(13),F=n(17),G=n(64),M=(n(323),n(157)),U=n(113),V=n(69),_=n(71),H=n(41),W=n(92);function J(){var e=Object(a.useState)(),t=Object(R.a)(e,2);t[0],t[1];Object(a.useEffect)((function(){f.a.get("")}),[]);var n="Fulanito",c="Garcia",r=!0,o="https://www.diariodesevilla.es/2021/02/07/sociedad/gatos-pelo-conocias-razas_1545155550_133880457_667x375.png",s="https://static.nationalgeographic.es/files/styles/image_3200/public/75552.ngsversion.1422285553360.jpg?w=1600&h=1067";return Object(T.jsxs)(b.a,{mt:10,children:[Object(T.jsxs)(b.e,{size:"lg",children:["Bienvenido ",n," ",c]}),Object(T.jsxs)(b.c,{direction:"column",align:"center",mt:5,children:[" ",Object(T.jsx)(b.e,{size:"md",children:"Documentos aportados"}),Object(T.jsx)(W.b,{m:3,src:o,alt:n}),Object(T.jsx)(W.b,{m:3,src:s,alt:n})]}),!0===r&&Object(T.jsx)(b.e,{size:"md",children:"Enhorabuena, su cuenta esta validada."}),!1===r&&Object(T.jsx)(b.e,{size:"md",children:"Su cuenta ser\xe1 validada por un administrador proximamente."})]})}function Q(){var e=G.b().shape({name:G.c().min(3,"Nombre muy corto").max(16,"Nombre muy largo").required("Nombre requerido"),surname:G.c().min(3,"Apellido muy corto").max(16,"Apellido muy largo").required("Apellido requerido"),email:G.c().email("Formato de email inv\xe1lido").required("Email requerido"),password:G.c().min(8,"Contrase\xf1a muy corta").required("Contrase\xf1a requerida"),username:G.a().min(8,"N\xfamero muy corto").required("N\xfamero de documento requerido")}),t=Object(q.b)(),n=Object(u.g)(),c=r.a.useState(!1),a=Object(R.a)(c,2),o=a[0],s=a[1],i=function(){return s(!o)};return Object(T.jsxs)(b.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(T.jsx)(M.a,{bg:"teal.500",size:"xl"}),Object(T.jsx)(b.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(T.jsx)(b.i,{as:"h3",size:"md",children:"Introduzca sus datos para realizar el registro"}),Object(T.jsx)(F.b,{initialValues:{name:"",surname:"",email:"",username:"",password:""},validationSchema:e,onSubmit:function(){var e=Object(p.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("VALUES",c),t(k(c)),console.log("USERNAME",c.username),localStorage.setItem("username",c.username),localStorage.setItem("password",c.password),localStorage.setItem("name",c.name),n.push("/onboarding");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){e.values,e.touched,e.isSubmiting,e.handleChange,e.handleBlur;return Object(T.jsxs)(F.a,{children:[Object(T.jsx)(_.a,{id:"name",name:"name",mt:6,variant:"flushed",type:"text",focusBorderColor:"teal.500",w:"350px",colorScheme:"teal",inputProps:{placeholder:"Nombre"}}),Object(T.jsx)(_.a,{id:"surname",name:"surname",mt:6,variant:"flushed",type:"text",placeholder:"Apellidos",colorScheme:"teal",w:"350px",focusBorderColor:"teal.500",inputProps:{placeholder:"Apellido"}}),Object(T.jsx)(_.a,{id:"username",name:"username",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"N\xfamero de documento",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"N\xfamero de documento"}}),Object(T.jsxs)(U.b,{children:[Object(T.jsx)(_.a,{id:"email",name:"email",mt:6,w:"350px",variant:"flushed",type:"text",placeholder:"Email",colorScheme:"teal",focusBorderColor:"teal.500",inputProps:{placeholder:"Correo electr\xf3nico"}}),Object(T.jsx)(U.c,{mt:6,pointerEvents:"none",children:Object(T.jsx)(H.a,{color:"teal"})})]}),Object(T.jsxs)(U.b,{children:[Object(T.jsx)(_.a,{name:"password",id:"password",mt:6,focusBorderColor:"teal.500",variant:"flushed",w:"350px",inputProps:{placeholder:"Contrase\xf1a",type:o?"text":"password"}}),Object(T.jsx)(U.d,{mt:6,width:"4.5rem",children:Object(T.jsx)(V.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:i,children:o?Object(T.jsx)(H.f,{}):Object(T.jsx)(H.e,{})})})]}),Object(T.jsxs)(V.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})}})]})}var K=n(78),X=function(){var e=Object(K.b)().toggleColorMode;return Object(T.jsx)(V.b,{ml:2,mt:2,"aria-label":"Toggle theme toggle button",colorScheme:Object(K.c)("purple","orange"),icon:Object(K.c)(Object(T.jsx)(H.c,{}),Object(T.jsx)(H.d,{})),onClick:e})};function Y(){var e=Object(u.g)();return Object(T.jsxs)(b.c,{mb:20,justify:"center",wrap:"wrap",children:[Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(b.f,{onClick:function(){return e.push("/iniciarsesion")},children:Object(T.jsx)(V.a,{m:2,colorScheme:"teal",children:"Inicia Sesi\xf3n"})}),Object(T.jsx)(b.f,{onClick:function(){return e.push("/")},children:Object(T.jsx)(V.a,{m:2,colorScheme:"teal",children:"Registrate"})})]}),Object(T.jsx)(b.f,{onClick:function(){return w()},children:Object(T.jsx)(V.a,{m:2,colorScheme:"red",children:"Salir"})}),Object(T.jsx)(X,{})]})}var Z=n(172);function $(){var e=Object(q.b)(),t=Object(u.g)(),n=Object(Z.a)(),c=n.register,a=n.handleSubmit,o=n.formState.errors;console.log(o);var s=r.a.useState(!1),l=Object(R.a)(s,2),d=l[0],m=l[1];return Object(T.jsxs)(b.b,{centerContent:!0,display:"flex",direction:"column",justify:"center",align:"center",children:[Object(T.jsx)(M.a,{bg:"teal.500",size:"xl"}),Object(T.jsx)(b.e,{as:"h1",mt:3,children:"Bienvenido"}),Object(T.jsxs)(b.i,{as:"h3",size:"md",children:["Inicie sesi\xf3n o"," ",Object(T.jsx)(j.b,{to:"/",passHref:!0,children:"reg\xedstrese"})]}),Object(T.jsxs)("form",{onSubmit:a((function(n){e(C(n)),"admin"===localStorage.getItem("username")?t.push("/paneladministracion"):t.push("/validacion")})),children:[Object(T.jsxs)(U.b,{children:[Object(T.jsx)(U.a,Object(i.a)({mt:10,minW:"40ch",variant:"flushed",type:"text",placeholder:"Documento de identidad",colorScheme:"teal",focusBorderColor:"teal.500"},c("username",{required:!0}))),Object(T.jsx)(U.d,{mt:10,pointerEvents:"none",children:Object(T.jsx)(H.b,{color:"teal"}),mr:4})]}),Object(T.jsxs)(U.b,{children:[Object(T.jsx)(U.a,Object(i.a)({mt:6,focusBorderColor:"teal.500",variant:"flushed",type:d?"text":"password",placeholder:"password"},c("password",{required:!0}))),Object(T.jsx)(U.d,{mt:6,width:"4.5rem",children:Object(T.jsx)(V.b,{colorScheme:"teal",h:"1.75rem",size:"sm",onClick:function(){return m(!d)},children:d?Object(T.jsx)(H.f,{}):Object(T.jsx)(H.e,{})})})]}),Object(T.jsxs)(V.a,{colorScheme:"teal",mt:10,type:"submit",children:[" ","Enviar"," "]})]})]})}function ee(){return Object(T.jsxs)(b.c,{w:"60vw",display:"flex",direction:"column",align:"center",justify:"center",children:[Object(T.jsx)(b.e,{as:"h1",size:"xl",children:"404"}),Object(T.jsx)(b.e,{as:"h2",size:"md",align:"center",children:"Lo sentimos, no hemos podido encontrar la pagina que estabas buscando."}),Object(T.jsx)(b.f,{href:"/",children:Object(T.jsx)(V.a,{mt:6,colorScheme:"teal",children:"Volver"})})]})}var te=n(173),ne=n.n(te);function ce(){var e=localStorage.getItem("username"),t=localStorage.getItem("name"),n="https://luciaberon.github.io/proyecto-validacion/#/validarusuario/".concat(e);return Object(T.jsxs)(b.c,{direction:"column",align:"center",children:[Object(T.jsxs)(b.e,{size:"md",children:["Gracias por registrarse ",t]}),Object(T.jsx)(b.i,{children:"Para continuar con el proceso, necesitamos que valide su identidad."}),Object(T.jsx)(b.i,{mt:6,children:"Escanee el siguiente c\xf3digo QR con su telefono para continuar:"}),Object(T.jsx)(b.a,{mt:6,children:Object(T.jsx)(ne.a,{value:n})})]})}var ae=n(162),re=f.a.create({baseURL:"https://validacion-desarrollo.herokuapp.com/api/",headers:{Authorization:"Bearer ".concat(localStorage.getItem("user"))}});function oe(){var e=Object(a.useState)(),t=Object(R.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){re.get("/panel/users");c(n)}),[]);var r=function(e){!function(e){re.post("/panel/validate",e)}(e)},o=n.filter((function(e){return!1===e.validate})),s=n.filter((function(e){return!0===e.validate}));return console.log(o),Object(T.jsxs)(b.c,{direction:"column",align:"center",children:[Object(T.jsxs)(b.e,{children:["Bienvenido ","Admin"]}),Object(T.jsxs)(b.i,{children:["Tenemos ",o.length," usuarios por validar"]}),Object(T.jsxs)(b.a,{direction:"column",align:"center",mt:20,children:[!o.length&&Object(T.jsx)(b.b,{children:Object(T.jsx)(b.i,{children:"\xa1Enhorabuena! No quedan usuarios por validar."})}),o.map((function(e){return Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(b.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(T.jsx)(ae.a,{allowToggle:!0,minW:"50rem",children:Object(T.jsxs)(ae.d,{borderColor:"teal",focusColor:"teal",children:[Object(T.jsx)("h2",{children:Object(T.jsxs)(ae.b,{focusColor:"teal",children:[Object(T.jsx)(b.a,{flex:"1",textAlign:"left",children:Object(T.jsx)(b.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(T.jsx)(ae.c,{})]})}),Object(T.jsxs)(ae.e,{justify:"center",pb:4,children:[Object(T.jsxs)(b.a,{display:"flex",children:[" ",Object(T.jsx)(W.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(T.jsx)(W.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(T.jsx)(V.a,{onClick:function(){return r(e.username)},colorScheme:"teal",m:4,children:"Validar documentos"})]})]})})]})}))," "]}),Object(T.jsxs)(b.a,{direction:"column",align:"center",mt:20,children:[Object(T.jsxs)(b.e,{size:"md",children:["Tenemos ",s.length," usuarios validados hasta ahora"]}),!o.length&&Object(T.jsx)(b.b,{children:Object(T.jsx)(b.i,{children:"\xa1Parece que no hay usuarios validados!"})}),s.map((function(e){return Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(b.e,{size:"lg",mb:3,mt:3,children:[e.name," ",e.lastname]}),Object(T.jsx)(ae.a,{allowToggle:!0,minW:"50rem",children:Object(T.jsxs)(ae.d,{borderColor:"teal",focusColor:"teal",children:[Object(T.jsx)("h2",{children:Object(T.jsxs)(ae.b,{focusColor:"teal",children:[Object(T.jsx)(b.a,{flex:"1",textAlign:"left",children:Object(T.jsx)(b.i,{fontSize:"lg",children:"Documentos aportados"})}),Object(T.jsx)(ae.c,{})]})}),Object(T.jsxs)(ae.e,{justify:"center",pb:4,children:[Object(T.jsxs)(b.a,{display:"flex",children:[" ",Object(T.jsx)(W.a,{src:e.img1,alt:e.name,cursor:"pointer",w:"350px",m:2}),Object(T.jsx)(W.a,{src:e.img2,alt:e.name,cursor:"pointer",w:"350px",m:2})]}),Object(T.jsx)(V.a,{colorScheme:"teal",m:4,children:"Anular validaci\xf3n"})]})]})})]})}))," "]})]})}var se=n(12),ie=n(174),le=n.n(ie),je=n(123),ue=(n(350),n(175)),de=n.n(ue),be=n(176),me=n.n(be);n(351);function he(){var e=Object(u.h)().username,t=(Object(u.g)(),Object(a.useState)(null)),n=Object(R.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(null),s=Object(R.a)(o,2),i=(s[0],s[1],Object(a.useState)()),l=Object(R.a)(i,2),j=l[0],d=(l[1],Object(a.useState)([])),m=Object(R.a)(d,2),h=m[0],O=m[1],p=Object(a.useState)(!1),x=Object(R.a)(p,2),g=x[0],f=x[1];return console.log("username uplaod page",e),Object(T.jsxs)(T.Fragment,{children:[g?"Im\xe1genes subidas. Espere a la validaci\xf3n por parte del administrador":Object(T.jsxs)(b.c,{direction:"column",align:"center",justify:"center",children:[Object(T.jsx)(b.e,{mb:6,children:"Bienvenido"}),Object(T.jsx)(b.i,{align:"center",children:"Para finalizar tu registro, necesitamos que subas tu documento de identidad. Ten en cuenta lo siguiente, por favor:"}),Object(T.jsxs)(b.j,{centerContent:!0,mt:4,mb:10,children:[Object(T.jsx)(b.g,{children:"Solo aceptamos imagenes en formato jpeg o png"}),Object(T.jsx)(b.g,{children:"Deben ser dos fotografias (anverso y reverso)"}),Object(T.jsx)(b.g,{children:"Tu cuenta no estar\xe1 activada hasta que el administrador no valide tus documentos"})]}),Object(T.jsx)("form",{children:Object(T.jsx)(je.FilePond,{files:c,onupdatefiles:r,allowMultiple:!0,maxFiles:2,server:{process:{url:"https://validacion-test.herokuapp.com/api/onboarding/dni",ondata:function(t){return t.append("username",e),t.append("id",j),t},onload:function(){f(!0)}}},name:"files",labelIdle:'Drag and Drop your files or <span class="filepond--label-action">Browse</span>'})})]}),Object(T.jsx)(le.a,{withIcon:!0,onChange:function(e){O([].concat(Object(se.a)(h),[e]))},imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880})]})}Object(je.registerPlugin)(de.a,me.a);var Oe=function(){var e=Object(u.g)(),t=Object(q.b)(),n=Object(a.useState)(!1),c=Object(R.a)(n,2),r=c[0],o=c[1];return Object(T.jsxs)("div",{children:[r&&Object(T.jsx)("h1",{children:"LOGGED"}),Object(T.jsx)("h2",{children:"P\xc1GINA ONBOARDING"}),Object(T.jsx)("button",{onClick:function(){o(!0),t(C({username:localStorage.getItem("username"),password:localStorage.getItem("password")})),console.log("login done, redirect"),e.push("/validacion")},children:"VALIDAR IDENTIDAD"})]})},pe=["auth","component"],xe=["auth","component"];var ge=function(e){var t=e.auth,n=e.component,c=Object(l.a)(e,pe);return Object(T.jsx)(u.b,Object(i.a)(Object(i.a)({},c),{},{render:function(){return t?Object(T.jsx)(n,{}):Object(T.jsx)(u.a,{to:"/iniciarsesion"})}}))},fe=function(e){var t=e.auth,n=e.component,c=Object(l.a)(e,xe);localStorage.getItem("username");return Object(T.jsx)(u.b,Object(i.a)(Object(i.a)({},c),{},{render:function(){return t?Object(T.jsx)(u.a,{to:"/panelusuario"}):Object(T.jsx)(n,{})}}))},ve=function(){var e=Object(q.b)(),t=Object(q.c)((function(e){return e.auth.isLoggedIn}));return console.log("AUTH",t),Object(a.useEffect)((function(){console.log("checking"),e(E())}),[]),Object(T.jsx)(d.a,{theme:L,children:Object(T.jsxs)(b.b,{p:10,mt:5,className:"App",children:[Object(T.jsx)(P,{}),Object(T.jsxs)(j.a,{children:[Object(T.jsx)(Y,{}),Object(T.jsxs)(u.d,{children:[Object(T.jsx)(fe,{exact:!0,path:"/",component:Q,auth:t}),Object(T.jsx)(u.b,{exact:!0,path:"/iniciarsesion",component:$,auth:t}),Object(T.jsx)(u.b,{exact:!0,path:"/validacion",component:ce,auth:t}),Object(T.jsx)(ge,{exact:!0,path:"/paneladministracion",component:oe,auth:t}),Object(T.jsx)(u.b,{exact:!0,path:"/onboarding",component:Oe}),Object(T.jsx)(u.b,{exact:!0,path:"/validarusuario/:username",component:he,auth:t}),Object(T.jsx)(ge,{exact:!0,path:"/panelusuario",component:J,auth:t}),Object(T.jsx)(u.b,{component:ee})]})]})]})})},Se=(n(352),n(44)),we=Object(Se.b)({auth:A}),ye=Object(x.a)({reducer:we});s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(q.a,{store:ye,children:Object(T.jsx)(ve,{})})}),document.getElementById("root"))}},[[353,1,2]]]);
//# sourceMappingURL=main.2059c82a.chunk.js.map